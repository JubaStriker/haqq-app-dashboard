{"ast":null,"code":"import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\"; // import Parse from \"parse\";\n\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nconst INITIAL_SCRIPTS_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: []\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  patch: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  destroy: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  }\n};\nconst useScriptsStore = create((set, get) => ({\n  scripts: INITIAL_SCRIPTS_STATE,\n  getScripts: async function () {\n    let shop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.lookbook.shop;\n    set(produce(state => ({ ...state,\n      scripts: { ...state.scripts,\n        get: { ...INITIAL_SCRIPTS_STATE.get,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_scripts?shop=${shop}`);\n      set(produce(state => ({ ...state,\n        scripts: { ...state.scripts,\n          get: { ...INITIAL_SCRIPTS_STATE.get,\n            success: {\n              ok: true,\n              data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        scripts: { ...state.scripts,\n          get: { ...INITIAL_SCRIPTS_STATE.get,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n      throw e;\n    }\n  },\n  postScripts: async function () {\n    let shop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.lookbook.shop;\n    set(produce(state => ({ ...state,\n      scripts: { ...state.scripts,\n        post: { ...INITIAL_SCRIPTS_STATE.post,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.post(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/post_scripts`, {\n        shop\n      });\n      set(produce(state => ({ ...state,\n        scripts: { ...state.scripts,\n          post: { ...INITIAL_SCRIPTS_STATE.post,\n            success: {\n              ok: true,\n              data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        scripts: { ...state.scripts,\n          post: { ...INITIAL_SCRIPTS_STATE.post,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n      throw e;\n    }\n  },\n  destroyScripts: async function () {\n    let shop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.lookbook.shop;\n    set(produce(state => ({ ...state,\n      scripts: { ...state.scripts,\n        destroy: { ...INITIAL_SCRIPTS_STATE.destroy,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.delete(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/destroy_scripts?shop=${shop}`);\n      set(produce(state => ({ ...state,\n        scripts: { ...state.scripts,\n          destroy: { ...INITIAL_SCRIPTS_STATE.destroy,\n            success: {\n              ok: true,\n              data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        scripts: { ...state.scripts,\n          destroy: { ...INITIAL_SCRIPTS_STATE.destroy,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n      throw e;\n    }\n  }\n}));\nexport default useScriptsStore;","map":{"version":3,"sources":["/Users/jithendra/Desktop/Work/meta-soft-xrp/xrp-shopify-coupon-client/src/store/scripts/index.js"],"names":["create","axios","produce","INTERNAL_SERVER_ERROR","INITIAL_SCRIPTS_STATE","get","loading","success","ok","data","failure","error","message","post","patch","destroy","useScriptsStore","set","scripts","getScripts","shop","window","lookbook","state","process","env","REACT_APP_API_SHOPLOOKS_SERVER_URL","e","postScripts","destroyScripts","delete"],"mappings":"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","sourcesContent":["import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\n// import Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_SCRIPTS_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: [],\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpost: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpatch: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tdestroy: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t}\n};\n\nconst useScriptsStore = create((set, get) => ({\n\tscripts: INITIAL_SCRIPTS_STATE,\n\tgetScripts: async (shop = window.lookbook.shop) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tscripts: {\n\t\t\t\t...state.scripts,\n\t\t\t\tget: {\n\t\t\t\t\t...INITIAL_SCRIPTS_STATE.get,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\t\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_scripts?shop=${shop}`);\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.get,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\t\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.get,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tpostScripts: async (shop = window.lookbook.shop) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tscripts: {\n\t\t\t\t...state.scripts,\n\t\t\t\tpost: {\n\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await axios.post(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/post_scripts`, { shop });\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tdestroyScripts: async (shop = window.lookbook.shop) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tscripts: {\n\t\t\t\t...state.scripts,\n\t\t\t\tdestroy: {\n\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await axios.delete(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/destroy_scripts?shop=${shop}`);\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t}\n}));\n\nexport default useScriptsStore;\n\t\n"]},"metadata":{},"sourceType":"module"}