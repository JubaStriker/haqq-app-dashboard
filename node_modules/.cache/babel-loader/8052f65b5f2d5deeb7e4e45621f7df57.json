{"ast":null,"code":"import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nconst INITIAL_TRANSACTION_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: []\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  }\n};\nconst useTransactionStore = create(set => ({\n  transactionState: INITIAL_TRANSACTION_STATE,\n  getTransactionState: async shop => {\n    set(produce(state => ({ ...state,\n      walletState: { ...state.transactionState,\n        get: { ...INITIAL_TRANSACTION_STATE.get,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      console.log(shop);\n      const {\n        data\n      } = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_shop?shop=${shop}`);\n      console.log(data);\n      const walletAddress = data.walletAddress;\n      console.log(walletAddress);\n      console.log(walletAddress);\n      const client = new window.xrpl.Client(process.env.REACT_APP_XRP_TRANSACTION_FETCH_UTL);\n      await client.connect();\n      const response = await client.request({\n        command: \"account_tx\",\n        account: walletAddress\n      });\n      set(produce(state => ({ ...state,\n        transactionState: { ...state.transactionState,\n          get: { ...INITIAL_TRANSACTION_STATE.get,\n            success: {\n              ok: true,\n              data: response\n            }\n          }\n        }\n      })));\n      return response;\n    } catch (e) {\n      throw e;\n    }\n  }\n}));\nexport default useTransactionStore;","map":{"version":3,"sources":["/Users/jithendra/Desktop/Work/meta-soft-xrp/xrp-shopify-coupon-client/src/store/transaction/index.js"],"names":["create","axios","produce","INTERNAL_SERVER_ERROR","INITIAL_TRANSACTION_STATE","get","loading","success","ok","data","failure","error","message","post","useTransactionStore","set","transactionState","getTransactionState","shop","state","walletState","console","log","process","env","REACT_APP_API_SHOPLOOKS_SERVER_URL","walletAddress","client","window","xrpl","Client","REACT_APP_XRP_TRANSACTION_FETCH_UTL","connect","response","request","command","account","e"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,SAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,OAApB;AACA,SAASC,qBAAT,QAAsC,yBAAtC;AAEA,MAAMC,yBAAyB,GAAG;AAChCC,EAAAA,GAAG,EAAE;AACHC,IAAAA,OAAO,EAAE,KADN;AAEHC,IAAAA,OAAO,EAAE;AACPC,MAAAA,EAAE,EAAE,KADG;AAEPC,MAAAA,IAAI,EAAE;AAFC,KAFN;AAMHC,IAAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAE,KADA;AAEPC,MAAAA,OAAO,EAAE;AAFF;AANN,GAD2B;AAYhCC,EAAAA,IAAI,EAAE;AACJP,IAAAA,OAAO,EAAE,KADL;AAEJC,IAAAA,OAAO,EAAE;AACPC,MAAAA,EAAE,EAAE,KADG;AAEPC,MAAAA,IAAI,EAAE;AAFC,KAFL;AAMJC,IAAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAE,KADA;AAEPC,MAAAA,OAAO,EAAE;AAFF;AANL;AAZ0B,CAAlC;AAyBA,MAAME,mBAAmB,GAAGd,MAAM,CAAEe,GAAD,KAAU;AAC3CC,EAAAA,gBAAgB,EAAEZ,yBADyB;AAE3Ca,EAAAA,mBAAmB,EAAE,MAAOC,IAAP,IAAgB;AACnCH,IAAAA,GAAG,CACDb,OAAO,CAAEiB,KAAD,KAAY,EAClB,GAAGA,KADe;AAElBC,MAAAA,WAAW,EAAE,EACX,GAAGD,KAAK,CAACH,gBADE;AAEXX,QAAAA,GAAG,EAAE,EACH,GAAGD,yBAAyB,CAACC,GAD1B;AAEHC,UAAAA,OAAO,EAAE;AAFN;AAFM;AAFK,KAAZ,CAAD,CADN,CAAH;;AAaA,QAAI;AACFe,MAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AACA,YAAM;AAACT,QAAAA;AAAD,UAAS,MAAMR,KAAK,CAACI,GAAN,CAAW,GAAEkB,OAAO,CAACC,GAAR,CAAYC,kCAAmC,sBAAqBP,IAAK,EAAtF,CAArB;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYb,IAAZ;AACA,YAAMiB,aAAa,GAAGjB,IAAI,CAACiB,aAA3B;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYI,aAAZ;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYI,aAAZ;AACA,YAAMC,MAAM,GAAG,IAAIC,MAAM,CAACC,IAAP,CAAYC,MAAhB,CACbP,OAAO,CAACC,GAAR,CAAYO,mCADC,CAAf;AAGA,YAAMJ,MAAM,CAACK,OAAP,EAAN;AACA,YAAMC,QAAQ,GAAG,MAAMN,MAAM,CAACO,OAAP,CAAe;AACpCC,QAAAA,OAAO,EAAE,YAD2B;AAEpCC,QAAAA,OAAO,EAAEV;AAF2B,OAAf,CAAvB;AAKAX,MAAAA,GAAG,CACDb,OAAO,CAAEiB,KAAD,KAAY,EAClB,GAAGA,KADe;AAElBH,QAAAA,gBAAgB,EAAE,EAChB,GAAGG,KAAK,CAACH,gBADO;AAEhBX,UAAAA,GAAG,EAAE,EACH,GAAGD,yBAAyB,CAACC,GAD1B;AAEHE,YAAAA,OAAO,EAAE;AACPC,cAAAA,EAAE,EAAE,IADG;AAEPC,cAAAA,IAAI,EAAEwB;AAFC;AAFN;AAFW;AAFA,OAAZ,CAAD,CADN,CAAH;AAeA,aAAOA,QAAP;AACD,KAhCD,CAgCE,OAAOI,CAAP,EAAU;AACV,YAAMA,CAAN;AACD;AACF;AAnD0C,CAAV,CAAD,CAAlC;AAsDA,eAAevB,mBAAf","sourcesContent":["import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_TRANSACTION_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: [],\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null,\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n};\n\nconst useTransactionStore = create((set) => ({\n  transactionState: INITIAL_TRANSACTION_STATE,\n  getTransactionState: async (shop) => {\n    set(\n      produce((state) => ({\n        ...state,\n        walletState: {\n          ...state.transactionState,\n          get: {\n            ...INITIAL_TRANSACTION_STATE.get,\n            loading: true,\n          },\n        },\n      }))\n    );\n\n    try {\n      console.log(shop);\n      const {data} = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_shop?shop=${shop}`);\n      console.log(data);\n      const walletAddress = data.walletAddress;\n      console.log(walletAddress)\n      console.log(walletAddress);\n      const client = new window.xrpl.Client(\n        process.env.REACT_APP_XRP_TRANSACTION_FETCH_UTL\n      );\n      await client.connect();\n      const response = await client.request({\n        command: \"account_tx\",\n        account: walletAddress,\n      });\n\n      set(\n        produce((state) => ({\n          ...state,\n          transactionState: {\n            ...state.transactionState,\n            get: {\n              ...INITIAL_TRANSACTION_STATE.get,\n              success: {\n                ok: true,\n                data: response,\n              },\n            },\n          },\n        }))\n      );\n      return response;\n    } catch (e) {\n      throw e;\n    }\n  },\n}));\n\nexport default useTransactionStore;\n"]},"metadata":{},"sourceType":"module"}