{"ast":null,"code":"var _jsxFileName = \"/Users/jithendra/Desktop/Work/meta-soft-xrp/xrp-shopify-coupon-client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Flex, Skeleton, Box, Container } from \"@chakra-ui/react\";\nimport { Navigate } from \"react-router-dom\";\nimport NavBar from \"./components/navbar\";\nimport LooksRoute from \"./routes/looks\";\nimport { parseQuery } from \"./utils/url\";\nimport Authorize from \"./routes/shopify/Authorize\";\nimport Parse from \"parse\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [shopifySessionAvailable, setShopifySessionAvailable] = useState(false);\n  const [shopifyHmacAvailable, setShopifyHmacAvailable] = useState(false);\n  const [shopifyCodeAvailable, setShopifyCodeAvailable] = useState(false);\n  const [shopifyHostAvailable, setShopifyHostAvailable] = useState(false); // if ('storage' in navigator && 'estimate' in navigator.storage) {\n  //   navigator.storage.estimate().then(data => {\n  //     const {usage, quota} = data;\n  //     console.log(`Using ${usage} out of ${quota} bytes.`);\n  //     if(quota <= 1003575331){\n  //       console.log('Incognito')\n  //   } else {\n  //       try {\n  //         Parse.User.logOut();\n  //       } catch (e) {\n  //       }\n  //   }\n  //   })\n  // } else {\n  //     console.log('Can not detect incognito')\n  // }\n\n  const [isEmbed, setIsEmbed] = useState(false);\n  useEffect(() => {\n    const {\n      code,\n      session,\n      hmac,\n      embed,\n      host = \"\",\n      userToken\n    } = parseQuery(window.location.search);\n    window.lookbook = parseQuery(window.location.search);\n\n    if (session) {\n      setShopifySessionAvailable(true);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false);\n    } else if (code) {\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(true);\n      setShopifyHostAvailable(false);\n      window.location.replace(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/shopify/callback${document.location.search}`);\n    } else if (hmac) {\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(true);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false);\n      window.location.replace(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/shopify${document.location.search}`);\n    } else if (host && !code && !hmac) {\n      setShopifyHostAvailable(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n    } else if (embed) {\n      setIsEmbed(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false);\n    }\n\n    if (userToken) {\n      if (Parse.User.current()) {\n        if (Parse.User.current().get('sessionToken') !== userToken) {\n          Parse.User.logOut().then(() => Parse.User.become(userToken)).catch(() => Parse.User.become(userToken));\n        }\n      } else {\n        Parse.User.become(userToken);\n      }\n    } else {}\n  }, []);\n\n  if (shopifySessionAvailable) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LooksRoute, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  } else if (isEmbed) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/embed\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 12\n    }, this);\n  } else if (shopifyHmacAvailable || shopifyCodeAvailable || shopifyHostAvailable) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxW: \"7xl\",\n      p: \"12\",\n      children: /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"flex-start\",\n        flexDirection: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n          children: /*#__PURE__*/_jsxDEV(Box, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          direction: \"column\",\n          width: \"90%\",\n          marginLeft: \"5\",\n          children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n            width: \"100%\",\n            height: \"40px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n            width: \"100%\",\n            height: \"20px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n            width: \"100%\",\n            height: \"20px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n            width: \"100%\",\n            height: \"20px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Authorize, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 12\n    }, this);\n  }\n}\n\n_s(App, \"7vThbm24aH9M+mH5rjhUooP4jpc=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/jithendra/Desktop/Work/meta-soft-xrp/xrp-shopify-coupon-client/src/App.js"],"names":["useState","useEffect","Flex","Skeleton","Box","Container","Navigate","NavBar","LooksRoute","parseQuery","Authorize","Parse","App","shopifySessionAvailable","setShopifySessionAvailable","shopifyHmacAvailable","setShopifyHmacAvailable","shopifyCodeAvailable","setShopifyCodeAvailable","shopifyHostAvailable","setShopifyHostAvailable","isEmbed","setIsEmbed","code","session","hmac","embed","host","userToken","window","location","search","lookbook","replace","process","env","REACT_APP_API_SHOPLOOKS_SERVER_URL","document","User","current","get","logOut","then","become","catch"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Flex, Skeleton, Box, Container } from \"@chakra-ui/react\";\nimport { Navigate } from \"react-router-dom\";\nimport NavBar from \"./components/navbar\";\nimport LooksRoute from \"./routes/looks\";\nimport { parseQuery } from \"./utils/url\";\nimport Authorize from \"./routes/shopify/Authorize\";\nimport Parse from \"parse\";\nfunction App() {\n  const [shopifySessionAvailable, setShopifySessionAvailable] = useState(false);\n  const [shopifyHmacAvailable, setShopifyHmacAvailable] = useState(false);\n  const [shopifyCodeAvailable, setShopifyCodeAvailable] = useState(false);\n  const [shopifyHostAvailable, setShopifyHostAvailable] = useState(false);\n\n  // if ('storage' in navigator && 'estimate' in navigator.storage) {\n  //   navigator.storage.estimate().then(data => {\n  //     const {usage, quota} = data;\n  //     console.log(`Using ${usage} out of ${quota} bytes.`);\n  //     if(quota <= 1003575331){\n  //       console.log('Incognito')\n  //   } else {\n  //       try {\n  //         Parse.User.logOut();\n  //       } catch (e) {\n\n  //       }\n  //   }\n  //   })\n  // } else {\n  //     console.log('Can not detect incognito')\n  // }\n\n  const [isEmbed, setIsEmbed] = useState(false);\n  useEffect(() => {\n    const {\n      code,\n      session,\n      hmac,\n      embed,\n      host = \"\",\n      userToken,\n    } = parseQuery(window.location.search);\n    window.lookbook = parseQuery(window.location.search);\n    if (session) {\n      setShopifySessionAvailable(true);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false);\n    } else if (code) {\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(true);\n      setShopifyHostAvailable(false);\n      window.location.replace(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/shopify/callback${document.location.search}`\n      );\n    } else if (hmac) {\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(true);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false);\n      window.location.replace(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/shopify${document.location.search}`\n      );\n    } else if (host && !code && !hmac) {\n      setShopifyHostAvailable(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n    } else if (embed) {\n      setIsEmbed(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false);\n    }\n\n    if (userToken) {\n      if (Parse.User.current()) {\n        if (Parse.User.current().get('sessionToken') !== userToken) {\n          Parse.User.logOut().then(() => Parse.User.become(userToken)).catch(() => Parse.User.become(userToken))\n        }\n      } else {\n        Parse.User.become(userToken);\n      }\n    } else {\n    }\n  }, []);\n\n  if (shopifySessionAvailable) {\n    return (\n      <>\n        <NavBar />\n        <LooksRoute />\n      </>\n    );\n  } else if (isEmbed) {\n    return <Navigate to=\"/embed\" replace />;\n  } else if (\n    shopifyHmacAvailable ||\n    shopifyCodeAvailable ||\n    shopifyHostAvailable\n  ) {\n    return (\n      <Container maxW={\"7xl\"} p=\"12\">\n        <Flex alignItems=\"flex-start\" flexDirection=\"row\">\n          <Skeleton>\n            <Box></Box>\n          </Skeleton>\n          <Flex direction=\"column\" width=\"90%\" marginLeft=\"5\">\n            <Skeleton width=\"100%\" height=\"40px\"></Skeleton>\n            <br />\n            <Skeleton width=\"100%\" height=\"20px\"></Skeleton>\n            <br />\n            <Skeleton width=\"100%\" height=\"20px\"></Skeleton>\n            <br />\n            <Skeleton width=\"100%\" height=\"20px\"></Skeleton>\n          </Flex>\n        </Flex>\n      </Container>\n    );\n  } else {\n    return <Authorize />;\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}