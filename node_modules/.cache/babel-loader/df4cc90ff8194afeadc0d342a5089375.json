{"ast":null,"code":"import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nconst INITIAL_CHARGES_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: []\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  destroy: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  }\n};\nconst useChargesStore = create((set, get) => ({\n  chargesState: INITIAL_CHARGES_STATE,\n  getCharges: async function () {\n    let {\n      shop = window.lookbook.shop\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    set(produce(state => ({ ...state,\n      chargesState: { ...state.chargesState,\n        get: { ...INITIAL_CHARGES_STATE.get,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      // Parse.Cloud.run('get_views', {\n      // \tshop, id\n      // })\n      const {\n        data\n      } = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_charges?shop=${shop}`);\n      set(produce(state => ({ ...state,\n        chargesState: { ...state.chargesState,\n          get: { ...INITIAL_CHARGES_STATE.get,\n            success: {\n              ok: true,\n              data: data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        chargesState: { ...state.chargesState,\n          get: { ...INITIAL_CHARGES_STATE.get,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n    }\n  },\n  postCharges: async _ref => {\n    let {\n      shop = window.lookbook.shop,\n      returnURL\n    } = _ref;\n    set(produce(state => ({ ...state,\n      chargesState: { ...state.chargesState,\n        post: { ...INITIAL_CHARGES_STATE.post,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.post(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/post_charges`, {\n        shop,\n        returnURL\n      });\n      set(produce(state => ({ ...state,\n        chargesState: { ...state.chargesState,\n          post: { ...INITIAL_CHARGES_STATE.post,\n            success: {\n              ok: true,\n              data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        chargesState: { ...state.chargesState,\n          post: { ...INITIAL_CHARGES_STATE.post,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n      throw e;\n    }\n  },\n  destroyCharges: async _ref2 => {\n    let {\n      shop = window.lookbook.shop,\n      chargeId\n    } = _ref2;\n    set(produce(state => ({ ...state,\n      chargesState: { ...state.chargesState,\n        destroy: { ...INITIAL_CHARGES_STATE.destroy,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.post(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/delete_charges`, {\n        shop,\n        chargeId\n      });\n      set(produce(state => ({ ...state,\n        chargesState: { ...state.chargesState,\n          destroy: { ...INITIAL_CHARGES_STATE.destroy,\n            success: {\n              ok: true,\n              data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        chargesState: { ...state.chargesState,\n          destroy: { ...INITIAL_CHARGES_STATE.destroy,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n      throw e;\n    }\n  }\n}));\nexport default useChargesStore;","map":{"version":3,"sources":["/Users/jithendra/Desktop/Work/hbar-shop/xrp-shopify-coupon-client/src/store/charges/index.js"],"names":["create","axios","produce","Parse","INTERNAL_SERVER_ERROR","INITIAL_CHARGES_STATE","get","loading","success","ok","data","failure","error","message","post","destroy","useChargesStore","set","chargesState","getCharges","shop","window","lookbook","state","process","env","REACT_APP_API_SHOPLOOKS_SERVER_URL","e","postCharges","returnURL","destroyCharges","chargeId"],"mappings":"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","sourcesContent":["import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_CHARGES_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: [],\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null,\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n  destroy: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null,\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n};\n\nconst useChargesStore = create((set, get) => ({\n  chargesState: INITIAL_CHARGES_STATE,\n  getCharges: async ({ shop = window.lookbook.shop } = {}) => {\n    set(\n      produce((state) => ({\n        ...state,\n        chargesState: {\n          ...state.chargesState,\n          get: {\n            ...INITIAL_CHARGES_STATE.get,\n            loading: true,\n          },\n        },\n      }))\n    );\n\n    try {\n      // Parse.Cloud.run('get_views', {\n      // \tshop, id\n      // })\n\n      const { data } = await axios.get(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_charges?shop=${shop}`\n      );\n      set(\n        produce((state) => ({\n          ...state,\n          chargesState: {\n            ...state.chargesState,\n            get: {\n              ...INITIAL_CHARGES_STATE.get,\n              success: {\n                ok: true,\n                data: data,\n              },\n            },\n          },\n        }))\n      );\n\n      return data;\n    } catch (e) {\n      set(\n        produce((state) => ({\n          ...state,\n          chargesState: {\n            ...state.chargesState,\n            get: {\n              ...INITIAL_CHARGES_STATE.get,\n              failure: {\n                error: true,\n                message: e.message || INTERNAL_SERVER_ERROR,\n              },\n            },\n          },\n        }))\n      );\n    }\n  },\n  postCharges: async ({ shop = window.lookbook.shop, returnURL }) => {\n    set(\n      produce((state) => ({\n        ...state,\n        chargesState: {\n          ...state.chargesState,\n          post: {\n            ...INITIAL_CHARGES_STATE.post,\n            loading: true,\n          },\n        },\n      }))\n    );\n\n    try {\n      const { data } = await axios.post(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/post_charges`,\n        {\n          shop,\n          returnURL,\n        }\n      );\n      set(\n        produce((state) => ({\n          ...state,\n          chargesState: {\n            ...state.chargesState,\n            post: {\n              ...INITIAL_CHARGES_STATE.post,\n              success: {\n                ok: true,\n                data,\n              },\n            },\n          },\n        }))\n      );\n      return data;\n    } catch (e) {\n      set(\n        produce((state) => ({\n          ...state,\n          chargesState: {\n            ...state.chargesState,\n            post: {\n              ...INITIAL_CHARGES_STATE.post,\n              failure: {\n                error: true,\n                message: e.message || INTERNAL_SERVER_ERROR,\n              },\n            },\n          },\n        }))\n      );\n      throw e;\n    }\n  },\n  destroyCharges: async ({ shop = window.lookbook.shop, chargeId }) => {\n    set(\n      produce((state) => ({\n        ...state,\n        chargesState: {\n          ...state.chargesState,\n          destroy: {\n            ...INITIAL_CHARGES_STATE.destroy,\n            loading: true,\n          },\n        },\n      }))\n    );\n\n    try {\n      const { data } = await axios.post(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/delete_charges`,\n        {\n          shop,\n          chargeId,\n        }\n      );\n      set(\n        produce((state) => ({\n          ...state,\n          chargesState: {\n            ...state.chargesState,\n            destroy: {\n              ...INITIAL_CHARGES_STATE.destroy,\n              success: {\n                ok: true,\n                data,\n              },\n            },\n          },\n        }))\n      );\n      return data;\n    } catch (e) {\n      set(\n        produce((state) => ({\n          ...state,\n          chargesState: {\n            ...state.chargesState,\n            destroy: {\n              ...INITIAL_CHARGES_STATE.destroy,\n              failure: {\n                error: true,\n                message: e.message || INTERNAL_SERVER_ERROR,\n              },\n            },\n          },\n        }))\n      );\n      throw e;\n    }\n  },\n}));\n\nexport default useChargesStore;\n"]},"metadata":{},"sourceType":"module"}