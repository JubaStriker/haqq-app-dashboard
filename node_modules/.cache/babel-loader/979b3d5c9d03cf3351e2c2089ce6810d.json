{"ast":null,"code":"import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nconst INITIAL_VIEWS_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: []\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  }\n};\nconst useViewsStore = create((set, get) => ({\n  viewsState: INITIAL_VIEWS_STATE,\n  getViews: async function () {\n    let {\n      shop = window.lookbook.shop\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    console.log(\"ererereerer\");\n    set(produce(state => ({ ...state,\n      viewsState: { ...state.viewsState,\n        get: { ...INITIAL_VIEWS_STATE.get,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      // Parse.Cloud.run('get_views', {\n      // \tshop, id\n      // })\n      const {\n        data\n      } = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_views?shop=${shop}`);\n      console.log(data);\n      set(produce(state => ({ ...state,\n        viewsState: { ...state.viewsState,\n          get: { ...INITIAL_VIEWS_STATE.get,\n            success: {\n              ok: true,\n              data: data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        viewsState: { ...state.viewsState,\n          get: { ...INITIAL_VIEWS_STATE.get,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n    }\n  },\n  postViews: async function () {\n    let {\n      shop = window.lookbook.shop,\n      subscribed\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    set(produce(state => ({ ...state,\n      viewsState: { ...state.viewsState,\n        post: { ...INITIAL_VIEWS_STATE.post,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/post_views?shop=${shop}&subscribed=${subscribed}`);\n      set(produce(state => ({ ...state,\n        viewsState: { ...state.viewsState,\n          post: { ...INITIAL_VIEWS_STATE.post,\n            success: {\n              ok: true,\n              data: data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        viewsState: { ...state.viewsState,\n          post: { ...INITIAL_VIEWS_STATE.post,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n    }\n  }\n}));\nexport default useViewsStore;","map":{"version":3,"sources":["/Users/jithendra/Desktop/Work/hbar-shop/hbar-shop-dashboard/src/store/views/index.js"],"names":["create","axios","produce","Parse","INTERNAL_SERVER_ERROR","INITIAL_VIEWS_STATE","get","loading","success","ok","data","failure","error","message","post","useViewsStore","set","viewsState","getViews","shop","window","lookbook","console","log","state","process","env","REACT_APP_API_SHOPLOOKS_SERVER_URL","e","postViews","subscribed"],"mappings":"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","sourcesContent":["import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_VIEWS_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: [],\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null,\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n};\n\nconst useViewsStore = create((set, get) => ({\n  viewsState: INITIAL_VIEWS_STATE,\n  getViews: async ({ shop = window.lookbook.shop } = {}) => {\n    console.log(\"ererereerer\");\n    set(\n      produce((state) => ({\n        ...state,\n        viewsState: {\n          ...state.viewsState,\n          get: {\n            ...INITIAL_VIEWS_STATE.get,\n            loading: true,\n          },\n        },\n      }))\n    );\n\n    try {\n      // Parse.Cloud.run('get_views', {\n      // \tshop, id\n      // })\n\n      const { data } = await axios.get(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_views?shop=${shop}`\n      );\n      console.log(data);\n\n      set(\n        produce((state) => ({\n          ...state,\n          viewsState: {\n            ...state.viewsState,\n            get: {\n              ...INITIAL_VIEWS_STATE.get,\n              success: {\n                ok: true,\n                data: data,\n              },\n            },\n          },\n        }))\n      );\n\n      return data;\n    } catch (e) {\n      set(\n        produce((state) => ({\n          ...state,\n          viewsState: {\n            ...state.viewsState,\n            get: {\n              ...INITIAL_VIEWS_STATE.get,\n              failure: {\n                error: true,\n                message: e.message || INTERNAL_SERVER_ERROR,\n              },\n            },\n          },\n        }))\n      );\n    }\n  },\n  postViews: async ({ shop = window.lookbook.shop, subscribed } = {}) => {\n    set(\n      produce((state) => ({\n        ...state,\n        viewsState: {\n          ...state.viewsState,\n          post: {\n            ...INITIAL_VIEWS_STATE.post,\n            loading: true,\n          },\n        },\n      }))\n    );\n\n    try {\n      const { data } = await axios.get(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/post_views?shop=${shop}&subscribed=${subscribed}`\n      );\n      set(\n        produce((state) => ({\n          ...state,\n          viewsState: {\n            ...state.viewsState,\n            post: {\n              ...INITIAL_VIEWS_STATE.post,\n              success: {\n                ok: true,\n                data: data,\n              },\n            },\n          },\n        }))\n      );\n\n      return data;\n    } catch (e) {\n      set(\n        produce((state) => ({\n          ...state,\n          viewsState: {\n            ...state.viewsState,\n            post: {\n              ...INITIAL_VIEWS_STATE.post,\n              failure: {\n                error: true,\n                message: e.message || INTERNAL_SERVER_ERROR,\n              },\n            },\n          },\n        }))\n      );\n    }\n  },\n}));\n\nexport default useViewsStore;\n"]},"metadata":{},"sourceType":"module"}