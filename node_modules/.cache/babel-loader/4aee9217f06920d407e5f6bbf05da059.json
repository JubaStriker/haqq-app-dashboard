{"ast":null,"code":"import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nimport Parse from \"parse\";\nconst INITIAL_WALLET_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: []\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null\n    },\n    failure: {\n      error: false,\n      message: \"\"\n    }\n  }\n};\nconst useWalletStore = create((set, address) => ({\n  walletState: INITIAL_WALLET_STATE,\n  //   getWalletAddress: async ({shop}) => {\n  //     try{\n  //         const xrpAddress = new Parse.Query('Shop');\n  //         xrpAddress.get(shop)\n  //     } catch(e){\n  //         console.log(error)\n  //     }\n  //   },\n  getWalletAddress: async function () {\n    let shop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.lookbook.shop;\n    set(produce(state => ({ ...state,\n      walletState: { ...state.walletState,\n        get: { ...INITIAL_WALLET_STATE.get,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.get(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_shop?shop=${shop}`);\n      console.log(data);\n      set(produce(state => ({ ...state,\n        walletState: { ...state.walletState,\n          get: { ...INITIAL_WALLET_STATE.get,\n            success: {\n              ok: true,\n              data\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (e) {\n      set(produce(state => ({ ...state,\n        scripts: { ...state.scripts,\n          get: { ...INITIAL_WALLET_STATE.get,\n            failure: {\n              error: true,\n              message: e.message || INTERNAL_SERVER_ERROR\n            }\n          }\n        }\n      })));\n      throw e;\n    }\n  },\n  postWalletAddress: async _ref => {\n    let {\n      shop,\n      walletAddress\n    } = _ref;\n    set(produce(state => ({ ...state,\n      walletState: { ...state.walletState,\n        post: { ...INITIAL_WALLET_STATE.post,\n          loading: true\n        }\n      }\n    })));\n\n    try {\n      const {\n        data\n      } = await axios.post(`${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/put_shop`, {\n        shop,\n        walletAddress\n      });\n      console.log(data);\n      set(produce(state => ({ ...state,\n        walletState: { ...state.walletState,\n          post: { ...INITIAL_WALLET_STATE.post,\n            loading: false,\n            success: {\n              ok: true\n            }\n          }\n        }\n      })));\n      return data;\n    } catch (error) {\n      console.log(error);\n      set(produce(state => ({ ...state,\n        walletState: { ...state.walletState,\n          post: { ...INITIAL_WALLET_STATE.post,\n            loading: false,\n            success: {\n              ok: false\n            },\n            failure: {\n              error: false,\n              message: \"Please Verify the Wallet Address\"\n            }\n          }\n        }\n      })));\n      throw error;\n    }\n  }\n}));\nexport default useWalletStore;","map":{"version":3,"sources":["/Users/jithendra/Desktop/Work/meta-soft-xrp/xrp-shopify-coupon-client/src/store/wallet/index.js"],"names":["create","axios","produce","INTERNAL_SERVER_ERROR","Parse","INITIAL_WALLET_STATE","get","loading","success","ok","data","failure","error","message","post","useWalletStore","set","address","walletState","getWalletAddress","shop","window","lookbook","state","process","env","REACT_APP_API_SHOPLOOKS_SERVER_URL","console","log","e","scripts","postWalletAddress","walletAddress"],"mappings":"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","sourcesContent":["import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nimport Parse from \"parse\";\n\nconst INITIAL_WALLET_STATE = {\n  get: {\n    loading: false,\n    success: {\n      ok: false,\n      data: [],\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n  post: {\n    loading: false,\n    success: {\n      ok: false,\n      data: null,\n    },\n    failure: {\n      error: false,\n      message: \"\",\n    },\n  },\n};\n\nconst useWalletStore = create((set, address) => ({\n  walletState: INITIAL_WALLET_STATE,\n  //   getWalletAddress: async ({shop}) => {\n  //     try{\n  //         const xrpAddress = new Parse.Query('Shop');\n  //         xrpAddress.get(shop)\n  //     } catch(e){\n  //         console.log(error)\n  //     }\n  //   },\n  getWalletAddress: async (shop = window.lookbook.shop) => {\n    set(\n      produce((state) => ({\n        ...state,\n        walletState: {\n          ...state.walletState,\n          get: {\n            ...INITIAL_WALLET_STATE.get,\n            loading: true,\n          },\n        },\n      }))\n    );\n\n    try {\n      const { data } = await axios.get(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/get_shop?shop=${shop}`\n      );\n      console.log(data);\n      set(\n        produce((state) => ({\n          ...state,\n          walletState: {\n            ...state.walletState,\n            get: {\n              ...INITIAL_WALLET_STATE.get,\n              success: {\n                ok: true,\n                data,\n              },\n            },\n          },\n        }))\n      );\n      return data;\n    } catch (e) {\n      set(\n        produce((state) => ({\n          ...state,\n          scripts: {\n            ...state.scripts,\n            get: {\n              ...INITIAL_WALLET_STATE.get,\n              failure: {\n                error: true,\n                message: e.message || INTERNAL_SERVER_ERROR,\n              },\n            },\n          },\n        }))\n      );\n      throw e;\n    }\n  },\n  postWalletAddress: async ({ shop, walletAddress }) => {\n    set(\n      produce((state) => ({\n        ...state,\n        walletState: {\n          ...state.walletState,\n          post: {\n            ...INITIAL_WALLET_STATE.post,\n            loading: true,\n          },\n        },\n      }))\n    );\n    try {\n      const { data } = await axios.post(\n        `${process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL}/api/put_shop`,\n        {\n          shop,\n          walletAddress,\n        }\n      );\n      console.log(data);\n      set(\n        produce((state) => ({\n          ...state,\n          walletState: {\n            ...state.walletState,\n            post: {\n              ...INITIAL_WALLET_STATE.post,\n              loading: false,\n              success: {\n                ok: true,\n              },\n            },\n          },\n        }))\n      );\n      return data;\n    } catch (error) {\n      console.log(error);\n      set(\n        produce((state) => ({\n          ...state,\n          walletState: {\n            ...state.walletState,\n            post: {\n              ...INITIAL_WALLET_STATE.post,\n              loading: false,\n              success: {\n                ok: false,\n              },\n              failure: {\n                error: false,\n                message: \"Please Verify the Wallet Address\",\n              },\n            },\n          },\n        }))\n      );\n      throw error;\n    }\n  },\n}));\n\nexport default useWalletStore;\n"]},"metadata":{},"sourceType":"module"}