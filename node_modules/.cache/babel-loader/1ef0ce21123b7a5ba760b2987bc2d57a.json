{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Action = exports.validateAction = exports.validateProps = void 0;\n\nvar type_validate_1 = require(\"../type-validate\");\n\nvar utils_1 = require(\"../utils\");\n\nvar Modal_1 = require(\"../../actions/Modal\");\n\nObject.defineProperty(exports, \"Action\", {\n  enumerable: true,\n  get: function () {\n    return Modal_1.Action;\n  }\n});\n\nvar Button_1 = require(\"../../actions/Button\");\n\nvar safe_redirect_1 = require(\"../safe-redirect\");\n\nvar button_1 = require(\"./button\");\n\nfunction matchesSafeOrigin(value, localOrigin) {\n  var hostName;\n\n  try {\n    hostName = new URL(localOrigin).hostname;\n  } catch (error) {\n    return [{\n      error: 'invalid_app_origin',\n      value: localOrigin,\n      message: \"Provided value for app origin: `\" + localOrigin + \"` is invalid\"\n    }];\n  }\n\n  var isSafeSrc = safe_redirect_1.isSafe(value, {\n    requireAbsolute: true,\n    requireSSL: true,\n    allowedDomains: [hostName]\n  });\n\n  if (!isSafeSrc) {\n    return [{\n      error: 'not_matching_app_origin',\n      value: value,\n      message: \"Provided URL origin does not match app origin `\" + hostName + \"`\"\n    }];\n  }\n}\n\nfunction matchesSize() {\n  return function (value) {\n    var values = [Modal_1.Size.Small, Modal_1.Size.Medium, Modal_1.Size.Large];\n\n    if (values.includes(value)) {\n      return;\n    }\n\n    var message = \"expected:\" + values.map(function (val) {\n      return \"`\" + val + \"`\";\n    }).join(' or ');\n\n    if (value === Modal_1.Size.Full) {\n      message += \". Size `\" + value + \"` is deprecated as of version 1.6.5 and will fall back to size `medium`\";\n    }\n\n    if (value === Modal_1.Size.Auto) {\n      message += \". Size `\" + value + \"` is deprecated as of version 1.12.x and will fall back to size `medium`. Use the `setUpModalAutoSizing` utility from `app-bridge-utils` instead\";\n    }\n\n    return [{\n      error: 'invalid_enum_value',\n      value: value,\n      message: message\n    }];\n  };\n}\n\nfunction getModalSchema(props, localOrigin) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var baseModalSchema = type_validate_1.matchesObject({\n    title: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    footer: type_validate_1.makeOptional(type_validate_1.matchesObject({\n      buttons: type_validate_1.matchesObject({\n        primary: type_validate_1.makeOptional(button_1.buttonSchemaWithId),\n        secondary: type_validate_1.makeOptional(type_validate_1.matchesArray(button_1.buttonSchemaWithId))\n      })\n    })),\n    size: type_validate_1.makeOptional(matchesSize())\n  });\n\n  if (Modal_1.isIframeModal(props)) {\n    if (props.url) {\n      var urlSchema = type_validate_1.matchesObject({\n        url: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n          return value.startsWith('https://') ? undefined : [{\n            error: 'invalid_secure_url',\n            value: value,\n            message: 'expected string to start with `https://`'\n          }];\n        }, function (value) {\n          return localOrigin ? matchesSafeOrigin(value, localOrigin) : undefined;\n        })\n      });\n      return type_validate_1.composeSchemas(baseModalSchema, urlSchema);\n    }\n\n    return type_validate_1.composeSchemas(baseModalSchema, utils_1.relativePathSchema);\n  }\n\n  return type_validate_1.composeSchemas(baseModalSchema, type_validate_1.matchesObject({\n    message: type_validate_1.matchesString()\n  }));\n}\n\nfunction validateProps(props, localOrigin) {\n  return type_validate_1.validate(props, getModalSchema(props, localOrigin));\n}\n\nexports.validateProps = validateProps;\n\nfunction validateAction(action, localOrigin) {\n  var schema = getModalSchema(action.payload, localOrigin);\n\n  switch (action.type) {\n    case Modal_1.Action.OPEN:\n    case Modal_1.Action.UPDATE:\n      return type_validate_1.validate(action, utils_1.createActionValidator(Modal_1.Action, schema, true, action.type === Modal_1.Action.UPDATE));\n\n    case Modal_1.Action.FOOTER_BUTTON_CLICK:\n      return button_1.validateAction(__assign(__assign({}, action), {\n        type: Button_1.Action.CLICK\n      }));\n\n    case Modal_1.Action.FOOTER_BUTTON_UPDATE:\n      return button_1.validateAction(__assign(__assign({}, action), {\n        type: Button_1.Action.UPDATE\n      }));\n\n    case Modal_1.Action.CLOSE:\n    default:\n      return type_validate_1.validate(action, utils_1.createActionValidator(Modal_1.Action));\n  }\n}\n\nexports.validateAction = validateAction;","map":{"version":3,"sources":["/Users/jithendra/Desktop/Work/hbar-shop/xrp-shopify-coupon-client/node_modules/@shopify/app-bridge/validate/actions/modal.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","Action","validateAction","validateProps","type_validate_1","require","utils_1","Modal_1","enumerable","get","Button_1","safe_redirect_1","button_1","matchesSafeOrigin","localOrigin","hostName","URL","hostname","error","message","isSafeSrc","isSafe","requireAbsolute","requireSSL","allowedDomains","matchesSize","values","Size","Small","Medium","Large","includes","map","val","join","Full","Auto","getModalSchema","props","baseModalSchema","matchesObject","title","makeOptional","matchesString","footer","buttons","primary","buttonSchemaWithId","secondary","matchesArray","size","isIframeModal","url","urlSchema","composeSchemas","startsWith","undefined","relativePathSchema","validate","action","schema","payload","type","OPEN","UPDATE","createActionValidator","FOOTER_BUTTON_CLICK","CLICK","FOOTER_BUTTON_UPDATE","CLOSE"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Action = exports.validateAction = exports.validateProps = void 0;\nvar type_validate_1 = require(\"../type-validate\");\nvar utils_1 = require(\"../utils\");\nvar Modal_1 = require(\"../../actions/Modal\");\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Modal_1.Action; } });\nvar Button_1 = require(\"../../actions/Button\");\nvar safe_redirect_1 = require(\"../safe-redirect\");\nvar button_1 = require(\"./button\");\nfunction matchesSafeOrigin(value, localOrigin) {\n    var hostName;\n    try {\n        hostName = new URL(localOrigin).hostname;\n    }\n    catch (error) {\n        return [\n            {\n                error: 'invalid_app_origin',\n                value: localOrigin,\n                message: \"Provided value for app origin: `\" + localOrigin + \"` is invalid\",\n            },\n        ];\n    }\n    var isSafeSrc = safe_redirect_1.isSafe(value, {\n        requireAbsolute: true,\n        requireSSL: true,\n        allowedDomains: [hostName],\n    });\n    if (!isSafeSrc) {\n        return [\n            {\n                error: 'not_matching_app_origin',\n                value: value,\n                message: \"Provided URL origin does not match app origin `\" + hostName + \"`\",\n            },\n        ];\n    }\n}\nfunction matchesSize() {\n    return function (value) {\n        var values = [Modal_1.Size.Small, Modal_1.Size.Medium, Modal_1.Size.Large];\n        if (values.includes(value)) {\n            return;\n        }\n        var message = \"expected:\" + values.map(function (val) { return \"`\" + val + \"`\"; }).join(' or ');\n        if (value === Modal_1.Size.Full) {\n            message += \". Size `\" + value + \"` is deprecated as of version 1.6.5 and will fall back to size `medium`\";\n        }\n        if (value === Modal_1.Size.Auto) {\n            message += \". Size `\" + value + \"` is deprecated as of version 1.12.x and will fall back to size `medium`. Use the `setUpModalAutoSizing` utility from `app-bridge-utils` instead\";\n        }\n        return [\n            {\n                error: 'invalid_enum_value',\n                value: value,\n                message: message,\n            },\n        ];\n    };\n}\nfunction getModalSchema(props, localOrigin) {\n    if (props === void 0) { props = {}; }\n    var baseModalSchema = type_validate_1.matchesObject({\n        title: type_validate_1.makeOptional(type_validate_1.matchesString()),\n        footer: type_validate_1.makeOptional(type_validate_1.matchesObject({\n            buttons: type_validate_1.matchesObject({\n                primary: type_validate_1.makeOptional(button_1.buttonSchemaWithId),\n                secondary: type_validate_1.makeOptional(type_validate_1.matchesArray(button_1.buttonSchemaWithId)),\n            }),\n        })),\n        size: type_validate_1.makeOptional(matchesSize()),\n    });\n    if (Modal_1.isIframeModal(props)) {\n        if (props.url) {\n            var urlSchema = type_validate_1.matchesObject({\n                url: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n                    return value.startsWith('https://')\n                        ? undefined\n                        : [\n                            {\n                                error: 'invalid_secure_url',\n                                value: value,\n                                message: 'expected string to start with `https://`',\n                            },\n                        ];\n                }, function (value) { return (localOrigin ? matchesSafeOrigin(value, localOrigin) : undefined); }),\n            });\n            return type_validate_1.composeSchemas(baseModalSchema, urlSchema);\n        }\n        return type_validate_1.composeSchemas(baseModalSchema, utils_1.relativePathSchema);\n    }\n    return type_validate_1.composeSchemas(baseModalSchema, type_validate_1.matchesObject({ message: type_validate_1.matchesString() }));\n}\nfunction validateProps(props, localOrigin) {\n    return type_validate_1.validate(props, getModalSchema(props, localOrigin));\n}\nexports.validateProps = validateProps;\nfunction validateAction(action, localOrigin) {\n    var schema = getModalSchema(action.payload, localOrigin);\n    switch (action.type) {\n        case Modal_1.Action.OPEN:\n        case Modal_1.Action.UPDATE:\n            return type_validate_1.validate(action, utils_1.createActionValidator(Modal_1.Action, schema, true, action.type === Modal_1.Action.UPDATE));\n        case Modal_1.Action.FOOTER_BUTTON_CLICK:\n            return button_1.validateAction(__assign(__assign({}, action), { type: Button_1.Action.CLICK }));\n        case Modal_1.Action.FOOTER_BUTTON_UPDATE:\n            return button_1.validateAction(__assign(__assign({}, action), { type: Button_1.Action.UPDATE }));\n        case Modal_1.Action.CLOSE:\n        default:\n            return type_validate_1.validate(action, utils_1.createActionValidator(Modal_1.Action));\n    }\n}\nexports.validateAction = validateAction;\n"]},"metadata":{},"sourceType":"script"}